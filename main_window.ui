<?xml version="1.0" encoding="UTF-8"?>
<ui version="4.0">

 <class>MainWindow</class>
 <widget class="QMainWindow" name="MainWindow">
  <property name="geometry">
   <rect>
    <x>0</x>
    <y>0</y>
    <width>1220</width>
    <height>780</height>
   </rect>
  </property>
  <property name="windowTitle">
   <string>Autogeoreferencer</string>
  </property>

  <!-- ===== Menubar & Statusbar ===== -->
  <widget class="QMenuBar" name="menubar">
   <property name="geometry">
    <rect>
     <x>0</x>
     <y>0</y>
     <width>1220</width>
     <height>22</height>
    </rect>
   </property>
   <addaction name="menuArchivo"/>
   <addaction name="menuVer"/>
   <addaction name="menuAyuda"/>
  </widget>
  <widget class="QStatusBar" name="statusbar">
   <property name="sizeGripEnabled">
    <bool>true</bool>
   </property>
  </widget>

  <!-- ===== Toolbars ===== -->
  <widget class="QToolBar" name="mainToolBar">
   <property name="windowTitle">
    <string>Barra principal</string>
   </property>
   <attribute name="toolBarArea">
    <enum>TopToolBarArea</enum>
   </attribute>
   <attribute name="toolBarBreak">
    <bool>false</bool>
   </attribute>
   <addaction name="actionLoadFloating"/>
   <addaction name="actionLoadReference"/>
   <addaction name="actionPickBasemap"/>
   <addaction name="separator"/>
   <addaction name="actionDrawAOI"/>
   <addaction name="separator"/>
   <addaction name="actionRun"/>
   <addaction name="actionStop"/>
   <addaction name="actionClear"/>
   <addaction name="separator"/>
   <addaction name="actionExportOrtho"/>
   <addaction name="actionExportReport"/>
  </widget>

  <widget class="QWidget" name="centralwidget">
   <layout class="QVBoxLayout" name="verticalLayout_root" stretch="0,1">
    <item>
     <!-- ===== Top header with stepper and quick stats ===== -->
     <widget class="QFrame" name="frameHeader">
      <property name="frameShape">
       <enum>QFrame::StyledPanel</enum>
      </property>
      <property name="frameShadow">
       <enum>QFrame::Raised</enum>
      </property>
      <layout class="QHBoxLayout" name="horizontalLayout_header">
       <item>
        <widget class="QListWidget" name="listSteps">
         <property name="maximumWidth">
          <number>320</number>
         </property>
         <property name="alternatingRowColors">
          <bool>true</bool>
         </property>
         <property name="selectionMode">
          <enum>QAbstractItemView::NoSelection</enum>
         </property>
         <item>
          <property name="text">
           <string>1 · Fuentes: cargar imágenes/base map</string>
          </property>
         </item>
         <item>
          <property name="text">
           <string>2 · Parámetros y cálculo</string>
          </property>
         </item>
         <item>
          <property name="text">
           <string>3 · Resultados y control de calidad</string>
          </property>
         </item>
         <item>
          <property name="text">
           <string>4 · Exportar ortorrectificada y reportes</string>
          </property>
         </item>
        </widget>
       </item>
       <item>
        <widget class="QFrame" name="frameQuickStats">
         <property name="frameShape">
          <enum>QFrame::StyledPanel</enum>
         </property>
         <layout class="QGridLayout" name="gridLayout_stats">
          <item row="0" column="0">
           <widget class="QLabel" name="label_crs_title">
            <property name="text">
             <string>CRS:</string>
            </property>
           </widget>
          </item>
          <item row="0" column="1">
           <widget class="QLabel" name="label_crs_value">
            <property name="text">
             <string>-</string>
            </property>
           </widget>
          </item>
          <item row="0" column="2">
           <widget class="QLabel" name="label_transform_title">
            <property name="text">
             <string>Transformación:</string>
            </property>
           </widget>
          </item>
          <item row="0" column="3">
           <widget class="QLabel" name="label_transform_value">
            <property name="text">
             <string>-</string>
            </property>
           </widget>
          </item>
          <item row="1" column="0">
           <widget class="QLabel" name="label_gcp_title">
            <property name="text">
             <string>Emparejamientos (GCPs):</string>
            </property>
           </widget>
          </item>
          <item row="1" column="1">
           <widget class="QLabel" name="label_gcp_value">
            <property name="text">
             <string>0</string>
            </property>
           </widget>
          </item>
          <item row="1" column="2">
           <widget class="QLabel" name="label_rmse_title">
            <property name="text">
             <string>RMSE total (px / m):</string>
            </property>
           </widget>
          </item>
          <item row="1" column="3">
           <widget class="QLabel" name="label_rmse_value">
            <property name="text">
             <string>-</string>
            </property>
           </widget>
          </item>
         </layout>
        </widget>
       </item>
      </layout>
     </widget>
    </item>

    <item>
     <!-- ===== Main Splitter: left controls / right view ===== -->
     <widget class="QSplitter" name="splitterMain">
      <property name="orientation">
       <enum>Qt::Horizontal</enum>
      </property>

      <!-- Left: Stacked step panels -->
      <widget class="QStackedWidget" name="stackSteps" minimumSize="300, 400">
       <!-- Page 0: Fuentes -->
       <widget class="QWidget" name="pageSources">
        <layout class="QVBoxLayout" name="verticalLayout_sources">
         <item>
          <widget class="QGroupBox" name="groupFloating">
           <property name="title">
            <string>Imagen a georreferenciar (flotante)</string>
           </property>
           <layout class="QGridLayout" name="grid_floating">
            <item row="0" column="0">
             <widget class="QLineEdit" name="editFloatingPath">
              <property name="placeholderText">
               <string>Ruta de la imagen (tif, jpg, png...)</string>
              </property>
             </widget>
            </item>
            <item row="0" column="1">
             <widget class="QPushButton" name="btnBrowseFloating">
              <property name="text">
               <string>Examinar…</string>
              </property>
             </widget>
            </item>
            <item row="1" column="0" colspan="2">
             <widget class="QCheckBox" name="chkFloatingPyramid">
              <property name="text">
               <string>Construir pirámides (si no existen)</string>
              </property>
             </widget>
            </item>
           </layout>
          </widget>
         </item>

         <item>
          <widget class="QGroupBox" name="groupReference">
           <property name="title">
            <string>Fuente de referencia</string>
           </property>
           <layout class="QGridLayout" name="grid_reference">
            <item row="0" column="0">
             <widget class="QRadioButton" name="radioReferenceRaster">
              <property name="text">
               <string>Raster/vector georreferenciado</string>
              </property>
              <property name="checked">
               <bool>true</bool>
              </property>
             </widget>
            </item>
            <item row="1" column="0">
             <widget class="QRadioButton" name="radioReferenceBasemap">
              <property name="text">
               <string>Capa base (XYZ / WMS / WMTS)</string>
              </property>
             </widget>
            </item>
            <item row="2" column="0">
             <widget class="QLineEdit" name="editReferencePath">
              <property name="placeholderText">
               <string>Ruta capa de referencia o nombre de capa</string>
              </property>
             </widget>
            </item>
            <item row="2" column="1">
             <widget class="QPushButton" name="btnBrowseReference">
              <property name="text">
               <string>Seleccionar…</string>
              </property>
             </widget>
            </item>
            <item row="3" column="0" colspan="2">
             <widget class="QComboBox" name="comboBasemapPresets">
              <property name="editable">
               <bool>false</bool>
              </property>
              <item><property name="text"><string>— Elegir preset XYZ/WMS —</string></property></item>
              <item><property name="text"><string>OpenStreetMap (XYZ)</string></property></item>
              <item><property name="text"><string>Google Satellite (XYZ)</string></property></item>
              <item><property name="text"><string>ESRI World Imagery (XYZ)</string></property></item>
              <item><property name="text"><string>PNOA (WMS)</string></property></item>
             </widget>
            </item>
           </layout>
          </widget>
         </item>

         <item>
          <spacer name="verticalSpacer_sources">
           <property name="orientation">
            <enum>Qt::Vertical</enum>
           </property>
           <property name="sizeHint" stdset="0">
            <size>
             <width>20</width>
             <height>40</height>
            </size>
           </property>
          </spacer>
         </item>
        </layout>
       </widget>

       <!-- Page 1: Parámetros y cálculo -->
       <widget class="QWidget" name="pageParams">
        <layout class="QVBoxLayout" name="verticalLayout_params">
         <item>
          <widget class="QGroupBox" name="groupMatching">
           <property name="title">
            <string>Emparejamiento y transformación</string>
           </property>
           <layout class="QGridLayout" name="grid_matching">
            <item row="0" column="0">
             <widget class="QLabel" name="label_detector">
              <property name="text"><string>Detector/descriptor</string></property>
             </widget>
            </item>
            <item row="0" column="1">
             <widget class="QComboBox" name="comboDetector">
              <item><property name="text"><string>SIFT</string></property></item>
              <item><property name="text"><string>ORB</string></property></item>
              <item><property name="text"><string>AKAZE</string></property></item>
              <item><property name="text"><string>SuperPoint</string></property></item>
             </widget>
            </item>
            <item row="1" column="0">
             <widget class="QLabel" name="label_model">
              <property name="text"><string>Modelo transformación</string></property>
             </widget>
            </item>
            <item row="1" column="1">
             <widget class="QComboBox" name="comboModel">
              <item><property name="text"><string>Helmert (cuadrática 1º)</string></property></item>
              <item><property name="text"><string>Affine</string></property></item>
              <item><property name="text"><string>Polynomial 2º</string></property></item>
              <item><property name="text"><string>Thin Plate Spline</string></property></item>
              <item><property name="text"><string>Projective (homografía)</string></property></item>
             </widget>
            </item>
            <item row="2" column="0">
             <widget class="QLabel" name="label_ransac">
              <property name="text"><string>RANSAC inliers min</string></property>
             </widget>
            </item>
            <item row="2" column="1">
             <widget class="QSpinBox" name="spinMinInliers">
              <property name="minimum"><number>4</number></property>
              <property name="maximum"><number>9999</number></property>
              <property name="value"><number>12</number></property>
             </widget>
            </item>
            <item row="3" column="0">
             <widget class="QLabel" name="label_resampling">
              <property name="text"><string>Re-muestreo</string></property>
             </widget>
            </item>
            <item row="3" column="1">
             <widget class="QComboBox" name="comboResampling">
              <item><property name="text"><string>Nearest</string></property></item>
              <item><property name="text"><string>Bilinear</string></property></item>
              <item><property name="text"><string>Cubic</string></property></item>
              <item><property name="text"><string>Lanczos</string></property></item>
             </widget>
            </item>
            <item row="4" column="0">
             <widget class="QCheckBox" name="chkClipToAOI">
              <property name="text"><string>Recortar a AOI</string></property>
              <property name="checked"><bool>true</bool></property>
             </widget>
            </item>
            <item row="4" column="1">
             <widget class="QPushButton" name="btnRunNow">
              <property name="text"><string>Ejecutar ahora</string></property>
             </widget>
            </item>
           </layout>
          </widget>
         </item>
         <item>
          <widget class="QGroupBox" name="groupAOI">
           <property name="title"><string>Área de interés (AOI)</string></property>
           <layout class="QHBoxLayout" name="hbox_aoi">
            <item><widget class="QLabel" name="label_aoi_info"><property name="text"><string>Usa el botón de la barra para dibujar un rectángulo o carga una geometría.</string></property></widget></item>
            <item><widget class="QPushButton" name="btnLoadAOI"><property name="text"><string>Cargar AOI…</string></property></widget></item>
           </layout>
          </widget>
         </item>
        </layout>
       </widget>

       <!-- Page 2: Resultados -->
       <widget class="QWidget" name="pageResults">
        <layout class="QVBoxLayout" name="verticalLayout_results">
         <item>
          <widget class="QGroupBox" name="groupMetrics">
           <property name="title"><string>Métricas</string></property>
           <layout class="QGridLayout" name="grid_metrics">
            <item row="0" column="0"><widget class="QLabel" name="label_rmse_x_t"><property name="text"><string>RMSE X</string></property></widget></item>
            <item row="0" column="1"><widget class="QLabel" name="label_rmse_x"><property name="text"><string>-</string></property></widget></item>
            <item row="1" column="0"><widget class="QLabel" name="label_rmse_y_t"><property name="text"><string>RMSE Y</string></property></widget></item>
            <item row="1" column="1"><widget class="QLabel" name="label_rmse_y"><property name="text"><string>-</string></property></widget></item>
            <item row="2" column="0"><widget class="QLabel" name="label_rmse_tot_t"><property name="text"><string>RMSE Total</string></property></widget></item>
            <item row="2" column="1"><widget class="QLabel" name="label_rmse_tot"><property name="text"><string>-</string></property></widget></item>
            <item row="3" column="0"><widget class="QLabel" name="label_num_matches_t"><property name="text"><string>Emparejamientos válidos</string></property></widget></item>
            <item row="3" column="1"><widget class="QLabel" name="label_num_matches"><property name="text"><string>0</string></property></widget></item>
            <item row="4" column="0"><widget class="QLabel" name="label_runtime_t"><property name="text"><string>Tiempo de ejecución</string></property></widget></item>
            <item row="4" column="1"><widget class="QLabel" name="label_runtime"><property name="text"><string>-</string></property></widget></item>
           </layout>
          </widget>
         </item>
         <item>
          <widget class="QGroupBox" name="groupReportPreview">
           <property name="title"><string>Vista previa del reporte</string></property>
           <layout class="QVBoxLayout" name="vbox_report">
            <item><widget class="QPlainTextEdit" name="plainReport"><property name="readOnly"><bool>true</bool></property></widget></item>
           </layout>
          </widget>
         </item>
        </layout>
       </widget>

       <!-- Page 3: Exportar -->
       <widget class="QWidget" name="pageExport">
        <layout class="QGridLayout" name="grid_export">
         <item row="0" column="0">
          <widget class="QGroupBox" name="groupExportRaster">
           <property name="title"><string>Exportar ortorrectificada</string></property>
           <layout class="QGridLayout" name="grid_export_raster">
            <item row="0" column="0"><widget class="QLabel" name="label_out_raster"><property name="text"><string>Salida GeoTIFF</string></property></widget></item>
            <item row="0" column="1"><widget class="QLineEdit" name="editOutRaster"/></item>
            <item row="0" column="2"><widget class="QPushButton" name="btnBrowseOutRaster"><property name="text"><string>Examinar…</string></property></widget></item>
            <item row="1" column="0"><widget class="QLabel" name="label_compression"><property name="text"><string>Compresión</string></property></widget></item>
            <item row="1" column="1"><widget class="QComboBox" name="comboCompression">
              <item><property name="text"><string>DEFLATE</string></property></item>
              <item><property name="text"><string>LZW</string></property></item>
              <item><property name="text"><string>ZSTD</string></property></item>
              <item><property name="text"><string>NONE</string></property></item>
            </widget></item>
            <item row="2" column="0"><widget class="QCheckBox" name="chkAddToProject"><property name="text"><string>Añadir al proyecto</string></property><property name="checked"><bool>true</bool></property></widget></item>
           </layout>
          </widget>
         </item>
         <item row="1" column="0">
          <widget class="QGroupBox" name="groupExportReport">
           <property name="title"><string>Exportar reporte de calidad</string></property>
           <layout class="QGridLayout" name="grid_export_report">
            <item row="0" column="0"><widget class="QLabel" name="label_out_report"><property name="text"><string>Salida JSON</string></property></widget></item>
            <item row="0" column="1"><widget class="QLineEdit" name="editOutReportJson"/></item>
            <item row="0" column="2"><widget class="QPushButton" name="btnBrowseOutReportJson"><property name="text"><string>Examinar…</string></property></widget></item>
            <item row="1" column="0"><widget class="QLabel" name="label_out_pdf"><property name="text"><string>Salida PDF</string></property></widget></item>
            <item row="1" column="1"><widget class="QLineEdit" name="editOutReportPdf"/></item>
            <item row="1" column="2"><widget class="QPushButton" name="btnBrowseOutReportPdf"><property name="text"><string>Examinar…</string></property></widget></item>
            <item row="2" column="0" colspan="3"><widget class="QPushButton" name="btnExportAll"><property name="text"><string>Exportar todo</string></property></widget></item>
           </layout>
          </widget>
         </item>
        </layout>
       </widget>
      </widget>

      <!-- Right: Map and previews -->
      <widget class="QTabWidget" name="tabViews">
       <property name="currentIndex"><number>0</number></property>
       <widget class="QWidget" name="tabSideBySide">
        <attribute name="title"><string>Vista lado a lado</string></attribute>
        <layout class="QHBoxLayout" name="hbox_side_by_side">
         <item>
          <widget class="QGroupBox" name="groupFloatPreview">
           <property name="title"><string>Flotante</string></property>
           <layout class="QVBoxLayout" name="vbox_float_prev">
            <item><widget class="QWidget" name="canvasFloating" native="true">
              <property name="minimumSize"><size><width>100</width><height>200</height></size></property>
             </widget></item>
           </layout>
          </widget>
         </item>
         <item>
          <widget class="QGroupBox" name="groupRefPreview">
           <property name="title"><string>Referencia</string></property>
           <layout class="QVBoxLayout" name="vbox_ref_prev">
            <item><widget class="QWidget" name="canvasReference" native="true">
              <property name="minimumSize"><size><width>100</width><height>200</height></size></property>
             </widget></item>
           </layout>
          </widget>
         </item>
        </layout>
       </widget>
       <widget class="QWidget" name="tabOverlay">
        <attribute name="title"><string>Superposición</string></attribute>
        <layout class="QVBoxLayout" name="vbox_overlay">
         <item><widget class="QSlider" name="sliderOpacity">
           <property name="orientation"><enum>Qt::Horizontal</enum></property>
           <property name="minimum"><number>0</number></property>
           <property name="maximum"><number>100</number></property>
           <property name="value"><number>50</number></property>
          </widget></item>
         <item><widget class="QWidget" name="canvasOverlay" native="true">
           <property name="minimumSize"><size><width>200</width><height>400</height></size></property>
          </widget></item>
        </layout>
       </widget>
      </widget>
     </widget>
    </item>
   </layout>
  </widget>

  <!-- ===== Menus ===== -->
  <action name="menuArchivo">
   <property name="text"><string>&amp;Archivo</string></property>
  </action>
  <action name="menuVer">
   <property name="text"><string>&amp;Ver</string></property>
  </action>
  <action name="menuAyuda">
   <property name="text"><string>&amp;Ayuda</string></property>
  </action>

  <!-- ===== Actions for toolbar ===== -->
  <action name="actionLoadFloating">
   <property name="text"><string>Cargar flotante</string></property>
   <property name="toolTip"><string>Cargar imagen a georreferenciar</string></property>
  </action>
  <action name="actionLoadReference">
   <property name="text"><string>Cargar referencia</string></property>
   <property name="toolTip"><string>Cargar raster/capa georreferenciada</string></property>
  </action>
  <action name="actionPickBasemap">
   <property name="text"><string>Basemap</string></property>
   <property name="toolTip"><string>Elegir capa base (XYZ/WMS)</string></property>
  </action>
  <action name="actionDrawAOI">
   <property name="text"><string>AOI</string></property>
   <property name="toolTip"><string>Dibujar rectángulo de AOI</string></property>
   <property name="checkable"><bool>true</bool></property>
  </action>
  <action name="actionRun">
   <property name="text"><string>Ejecutar</string></property>
   <property name="toolTip"><string>Ejecutar georreferenciación automática</string></property>
  </action>
  <action name="actionStop">
   <property name="text"><string>Detener</string></property>
   <property name="toolTip"><string>Detener proceso</string></property>
  </action>
  <action name="actionClear">
   <property name="text"><string>Limpiar</string></property>
   <property name="toolTip"><string>Limpiar resultados temporales</string></property>
  </action>
  <action name="actionExportOrtho">
   <property name="text"><string>Exportar orto</string></property>
   <property name="toolTip"><string>Guardar GeoTIFF ortorrectificado</string></property>
  </action>
  <action name="actionExportReport">
   <property name="text"><string>Exportar reporte</string></property>
   <property name="toolTip"><string>Guardar reportes (JSON/PDF)</string></property>
  </action>
 </widget>
 <resources/>
 <connections/>
</ui>
